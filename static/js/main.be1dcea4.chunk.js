(this.webpackJsonpmusic=this.webpackJsonpmusic||[]).push([[0],{149:function(e){e.exports=JSON.parse('{"name":"music","version":"1.0.0","description":"\u041f\u0435\u0440\u0435\u043d\u043e\u0441\u0438 \u043c\u0443\u0437\u044b\u043a\u0443 \u0432 VK","main":"index.js","homepage":"https://dan0102dan.github.io/music","scripts":{"start":"cross-env PORT=10888 react-scripts start","build":"GENERATE_SOURCEMAP=false react-scripts build","predeploy":"npm run build","deploy":"gh-pages -d build"},"keywords":[],"author":"","license":"MIT","devDependencies":{"babel-eslint":"^10.1.0","cross-env":"^5.2.1","eslint":"^6.6.0","eslint-config-standard":"^14.1.1","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-react":"^7.21.5","eslint-plugin-standard":"^4.0.2","gh-pages":"^3.1.0","react-hot-loader":"^4.13.0","react-scripts":"^3.4.4"},"dependencies":{"@vkontakte/icons":"^1.51.0","@vkontakte/vk-bridge":"^2.3.0","@vkontakte/vk-miniapps-deploy":"0.0.17","@vkontakte/vkui":"^3.13.0","axios-jsonp-pro":"^1.1.8","beautiful-react-hooks":"^0.31.0","chalk":"^2.4.2","core-js":"^3.7.0","eruda":"^2.4.1","eruda-code":"^2.0.0","eruda-dom":"^2.0.0","express":"^4.17.1","jimp":"^0.16.1","node-sass":"^5.0.0","papaparse":"^5.3.0","prop-types":"^15.7.2","react":"^16.14.0","react-dom":"^16.14.0","react-masonry-layout":"^0.4.0","react-spring":"^9.0.0-rc.3","react-virtualized-auto-sizer":"^1.0.2","react-window":"^1.8.6","socket.io-client":"^2.3.1"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},203:function(e,t,a){e.exports=a(345)},311:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){e.exports=a.p+"static/media/Spotify.e359ad39.svg"},314:function(e,t,a){e.exports=a.p+"static/media/Yandex.deac2f88.svg"},315:function(e,t,a){e.exports=a.p+"static/media/error.6dd30fb5.png"},316:function(e,t,a){},342:function(e,t){},345:function(e,t,a){"use strict";a.r(t);a(204),a(230),a(232),a(233),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272);var n=a(0),r=a.n(n),s=a(132),o=a.n(s),i=a(12),c=a.n(i),l=a(42),u=a(43),p=a(61),d=a(47),m=a(46),h=a(3),f=a(153),g=a.n(f),b=a(154),v=a.n(b),y=(a(291),a(22)),k=a.n(y),E=a(87),x=a(30),S=a(156),w=a(144),_=a.n(w),C=a(48),B=a.n(C),j=a(157),A=a(66),P=a(155),O=(a(311),function(e){var t=e.children,a=Object(A.a)(e,["children"]),s=Object(n.useState)(!1),o=Object(j.a)(s,2),i=o[0],c=o[1];return Object(P.a)((function(){c(window.scrollY>=50)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.t,Object.assign({},a,{separator:!1,transparent:!i}),i&&t),r.a.createElement(h.j,{className:"MainEpicHeader__text"},t))}),z=a(44),I=a.n(z),N=a(148),T=a.n(N),M=a(147),V=a.n(M),W=a(62),D=a.n(W),K=(a(312),function(e){var t=Object(h.H)(),a=e.className,n=e.mode,s=e.imageTheme,o=e.size,i=e.before,c=e.asideMode,l=e.header,u=e.subheader,p=e.text,d=e.children,m=e.background,f=e.actions,g=e.onDismiss,b=Object(A.a)(e,["className","mode","imageTheme","size","before","asideMode","header","subheader","text","children","background","actions","onDismiss"]),v="expand"===c?h.C:"div";return r.a.createElement("div",Object.assign({},b,{className:Object(h.F)(Object(h.G)("Banner",t),"Banner--md-".concat(n),"Banner--sz-".concat(o),{"Banner--inverted":"image"===n&&"dark"===s},a)}),d,r.a.createElement(v,{className:"Banner__in"},"image"===n&&m&&r.a.createElement("div",{className:"Banner__bg"},m),i&&r.a.createElement("div",{className:"Banner__before"},i),r.a.createElement("div",{className:"Banner__content"},l&&r.a.createElement("div",{className:"Banner__header"},l),u&&r.a.createElement("div",{className:"Banner__subheader"},u),p&&r.a.createElement("div",{className:"Banner__text"},p),f&&r.a.createElement("div",{className:"Banner__actions"},f)),"expand"===c&&r.a.createElement("div",{className:"Banner__expand"},r.a.createElement(I.a,null)),"dismiss"===c&&r.a.createElement("div",{className:"Banner__dismiss"},r.a.createElement("div",{className:"Banner__dismissIcon",onClick:g},t===h.a&&r.a.createElement(D.a,null),t===h.o&&("image"===n?r.a.createElement(V.a,null):r.a.createElement(T.a,null))))))});K.defaultProps={mode:"tint",size:"s",imageTheme:"dark"};var q=K,F=a(38),H=a.n(F),R=a(64),G=a.n(R),Y={AppleMusic:a(52),Spotify:a(313),Yandex:a(314),Error:a(315)},L=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).goBack=function(){var e=n.state.history;"home"===n.state.activePanel&&c.a.send("VKWebAppDisableSwipeBack"),e.length>1&&(e.pop(),"home"===e[e.length-1]&&(n.setState({songs:[],count:0}),n.props.setTabbar(!0),document.documentElement.style.setProperty("--padding","calc(var(--safe-area-inset-bottom) + var(--tabbar_height))"),document.documentElement.style.setProperty("--bottom","calc(var(--tabbar_height) + var(--safe-area-inset-bottom))")),n.setState({activePanel:e[e.length-1]}))},n.state={activePanel:"home",history:["home"],snackbar:null,vk_platform:"browser",songs:[],count:0,link:""},n}return Object(u.a)(a,[{key:"goToPage",value:function(e){window.history.pushState({panel:e},e),"home"===this.state.activePanel&&(c.a.send("VKWebAppEnableSwipeBack"),this.props.setTabbar(null),document.documentElement.style.setProperty("--padding","0"),document.documentElement.style.setProperty("--bottom","var(--safe-area-inset-bottom)")),this.setState({activePanel:e,history:[].concat(Object(S.a)(this.state.history),[e])})}},{key:"openSuccess",value:function(){var e=this;this.setState({snackbar:r.a.createElement(h.x,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(h.c,{size:24,style:{backgroundColor:"var(--accent)"}},r.a.createElement(H.a,{fill:"#fff",width:14,height:14}))},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438!")})}},{key:"openError",value:function(e){var t=this;this.setState({snackbar:r.a.createElement(h.x,{layout:"vertical",onClose:function(){return t.setState({snackbar:null})},before:r.a.createElement(h.c,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"}},r.a.createElement(G.a,{fill:"#fff",width:14,height:14}))},e)})}},{key:"openCaptcha",value:function(e,t,a,n,s){var o=this;this.props.setModal(r.a.createElement(h.r,{activeModal:"Captcha",onClose:this.props.setModal(null)},r.a.createElement(h.q,{id:"Captcha",onClose:function(){return o.props.setModal(null)},header:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u0430\u043f\u0447\u0443",actions:[{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",mode:"primary",action:function(){return o.returnCaptcha(e,t,a,n)}}]},r.a.createElement("img",{alt:"error",style:{margin:"auto",display:"block",width:"60%",borderRadius:8,marginTop:10,marginBottom:10},src:s}),r.a.createElement(h.p,{defaultValue:"",onChange:function(e){return t=e.target.value},onKeyDown:function(r){"Enter"===r.key&&o.returnCaptcha(e,t,a,n)}}))))}},{key:"componentDidMount",value:function(){var e=this;if(window.addEventListener("popstate",(function(){return e.goBack()})),window.location.search){var t=window.location.search.match(/vk_platform=([a-z_]+)/);this.setState({vk_platform:t[1].toString()})}}},{key:"returnCaptcha",value:function(e,t,a,n){this.props.socket.emit(n,{playlist:e,sign:window.location.search.slice(1),captcha:{key:t,captcha_sid:a}}),this.props.setModal(null)}},{key:"render",value:function(){var e=this;return r.a.createElement(h.s,{id:this.id},r.a.createElement(h.i,{scheme:document.body.getAttribute("scheme")?document.body.getAttribute("scheme"):"bright_light"},r.a.createElement(h.E,{activePanel:this.state.activePanel,history:this.state.history,onSwipeBack:this.goBack},r.a.createElement(h.s,{id:"home"},r.a.createElement(O,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),r.a.createElement(q,{id:"Apple",mode:"image",background:r.a.createElement("div",{id:"BannerBackground",style:{backgroundImage:"linear-gradient(326deg, #9b2952 0%, #171428 74%)"}}),before:r.a.createElement(h.c,{style:{background:"none"},size:86,mode:"image",src:Y.AppleMusic}),header:"Apple Music",subheader:"\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u043c\u0443\u0437\u044b\u043a\u0443 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 Apple.",onClick:function(){return document.getElementById("AppleInput").click()}},r.a.createElement("input",{style:{display:"none"},type:"file",accept:".txt",id:"AppleInput",onChange:function(t){e.props.setPopout(r.a.createElement(h.v,null));var a,n=new FileReader,s=[];n.readAsText(t.target.files[0],"UTF-8"),n.onload=function(n){a=n.target.result;var r=_.a.parse(a,{header:!0});if(!r.errors.length||r.data.length){r.data.pop();for(var o=0;r.data.length>o;o++){var i=r.data[o],c=Object.keys(i);if(!c.includes("Name")||!c.includes("Artist")||!c.includes("Album"))return void e.openError("\u041e\u0448\u0438\u0431\u043a\u0430");s.push({index:o,name:i.Name,artist:i.Artist,album:i.Album})}e.setState({count:s.length},(function(){return e.goToPage("transfer")}));try{e.props.setPopout(null),e.props.socket.emit("AppleMusic",{playlist:s,sign:window.location.search.slice(1)}),e.props.socket.on("message",(function(t){if(console.log(t),null===t||void 0===t?void 0:t.error)if("Captcha needed"===t.error){s=s.splice(s.findIndex((function(e){return e.name===t.description.request_params[t.description.request_params.findIndex((function(e){return"q"===e.key}))].value})));e.openCaptcha(s,"",t.description.captcha_sid,"AppleMusic",t.description.captcha_img)}else e.setState({songs:"error"});else{var a=e.state.songs;a.unshift(t),e.setState({songs:a})}}))}catch(t){e.setState({songs:"error"})}}else e.openError("\u041e\u0448\u0438\u0431\u043a\u0430")}}})),r.a.createElement(q,{id:"Spotify",mode:"image",background:r.a.createElement("div",{id:"BannerBackground",style:{backgroundImage:"linear-gradient(326deg, #000000 0%, #313131 74%)"}}),before:r.a.createElement(h.c,{style:{background:"none"},size:86,mode:"image",src:Y.Spotify}),header:"Spotify",subheader:"\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u043c\u0443\u0437\u044b\u043a\u0443 \u0438\u0437 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u0430 Spotify.",onClick:function(){return e.props.setPopout(r.a.createElement(h.b,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0414\u0430\u043b\u0435\u0435",autoclose:!0,action:function(){var t=Object(x.a)(k.a.mark((function t(){var a,n,s,o,i,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.setPopout(r.a.createElement(h.v,null)),t.prev=1,!(e.state.link.search(/playlist/i)>-1)){t.next=7;break}a=e.state.link.split("playlist/")[1].split("?")[0],console.log(a),t.next=10;break;case 7:return e.props.setPopout(null),e.openError("\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430"),t.abrupt("return");case 10:n=[],s={next:"https://api.spotify.com/v1/playlists/".concat(a,"/tracks")};case 11:if(!s.next){t.next=20;break}return t.next=14,B.a.get(s.next,{headers:{Authorization:"Bearer BQA5O4ZFQkgni0aodHl1cUlzSH2c6PqpyE_6BHhMlcTPS7dU3VR8MUOstKTsL9XT5VQ0riDHH8ow7NilhNnCy5ptmnprS09tdH3IwTyIZEk5X0SUQ7WBWLJkT9rXl24agB_wc_abkkD7rRxb7qLOfpn9_diadKwqM4QN9tGmZWYjpCSkgNcW8_TXNGWnSlH3E6E"}});case 14:s=t.sent,console.log(s),o=Object(E.a)(s.data.items);try{for(o.s();!(i=o.n()).done;)c=i.value,console.log(c),n.push({name:c.track.name,artist:c.track.artists,album:c.track.album.name})}catch(l){o.e(l)}finally{o.f()}t.next=11;break;case 20:e.setState({count:n.length},(function(){return e.goToPage("transfer")})),e.props.socket.emit("Spotify",{playlist:n,sign:window.location.search.slice(1)}),e.props.socket.on("message",(function(t){if(console.log(t),e.props.setPopout(null),null===t||void 0===t?void 0:t.error)if("Captcha needed"===t.error){n=n.splice(n.findIndex((function(e){return e.name===t.description.request_params[t.description.request_params.findIndex((function(e){return"q"===e.key}))].value})));e.openCaptcha(n,"",t.description.captcha_sid,"Spotify",t.description.captcha_img)}else e.setState({songs:"error"});else{var a=e.state.songs;a.unshift(t),e.setState({songs:a})}})),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(1),e.props.setPopout(null),e.openError("\u041e\u0448\u0438\u0431\u043a\u0430");case 29:case"end":return t.stop()}}),t,null,[[1,25]])})));return function(){return t.apply(this,arguments)}}()}],onClose:function(){return e.props.setPopout(null)}},r.a.createElement("h2",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443"),r.a.createElement("p",null,"\u0414\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442"),r.a.createElement(h.p,{style:{marginTop:16,marginBottom:-7},onChange:function(t){e.setState({link:t.target.value})},type:"text"})))}}),r.a.createElement(q,{id:"Yandex",mode:"image",background:r.a.createElement("div",{id:"BannerBackground",style:{backgroundImage:"linear-gradient(326deg, #29539B 0%, #1E3B70 74%)"}}),before:r.a.createElement(h.c,{style:{background:"none"},size:86,mode:"image",src:Y.Yandex}),header:"\u042f\u043d\u0434\u0435\u043a\u0441 \u041c\u0443\u0437\u044b\u043a\u0430",subheader:"\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0442\u0438 \u043c\u0443\u0437\u044b\u043a\u0443 \u0438\u0437 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u0430 \u042f\u043d\u0434\u0435\u043a\u0441 \u041c\u0443\u0437\u044b\u043a\u0438.",onClick:function(){return e.props.setPopout(r.a.createElement(h.b,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0414\u0430\u043b\u0435\u0435",autoclose:!0,action:function(){var t=Object(x.a)(k.a.mark((function t(){var a,n,s,o,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.setPopout(r.a.createElement(h.v,null)),t.prev=1,!(e.state.link.search(/playlist/i)>-1)){t.next=11;break}s=e.state.link.split("playlist"),n=Number(s[1].replace(/[^\d]/g,"")),s.splice(1,1),s=(s=s[0]).split("users"),a=s[1].replace(/\//g,""),t.next=14;break;case 11:return e.props.setPopout(null),e.openError("\u041d\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430"),t.abrupt("return");case 14:return o=[],t.next=17,B.a.get("https://cors-anywhere.herokuapp.com/https://music.yandex.ru/handlers/playlist.jsx?owner=".concat(a,"&kinds=").concat(n,"&light=true&madeFor=&withLikesCount=true&lang=ru&external-domain=music.yandex.ru&overembed=false"));case 17:return i=(i=t.sent).data.playlist.trackIds.toString(),t.next=21,B.a.post("https://cors-anywhere.herokuapp.com/https://music.yandex.ru/handlers/track-entries.jsx",{entries:i}).then(function(){var e=Object(x.a)(k.a.mark((function e(t){var a,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(E.a)(t.data),e.prev=1,a.s();case 3:if((n=a.n()).done){e.next=14;break}r=n.value,e.prev=5,o.push({name:r.title,artist:r.artists[0].name,album:r.albums[0].title}),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(5),e.abrupt("continue",12);case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,16,19,22],[5,9]])})));return function(t){return e.apply(this,arguments)}}());case 21:e.setState({count:o.length},(function(){return e.goToPage("transfer")})),e.props.socket.emit("YandexMusic",{playlist:o,sign:window.location.search.slice(1)}),e.props.socket.on("message",(function(t){if(console.log(t),e.props.setPopout(null),null===t||void 0===t?void 0:t.error)if("Captcha needed"===t.error){o=o.splice(o.findIndex((function(e){return e.name===t.description.request_params[t.description.request_params.findIndex((function(e){return"q"===e.key}))].value})));e.openCaptcha(o,"",t.description.captcha_sid,"YandexMusic",t.description.captcha_img)}else e.setState({songs:"error"});else{var a=e.state.songs;a.unshift(t),e.setState({songs:a})}})),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(1),e.props.setPopout(null),e.openError("\u041e\u0448\u0438\u0431\u043a\u0430");case 30:case"end":return t.stop()}}),t,null,[[1,26]])})));return function(){return t.apply(this,arguments)}}()}],onClose:function(){return e.props.setPopout(null)}},r.a.createElement("h2",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443"),r.a.createElement("p",null,"\u0414\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u043f\u043b\u0435\u0439\u043b\u0438\u0441\u0442"),r.a.createElement(h.p,{style:{marginTop:16,marginBottom:-7},onChange:function(t){e.setState({link:t.target.value})},type:"text"})))}}),this.state.snackbar),r.a.createElement(h.s,{id:"transfer"},r.a.createElement(h.t,{left:r.a.createElement(h.u,{style:{cursor:"pointer"},onClick:function(){return e.goBack()}})},"error"===this.state.songs?"\u041e\u0448\u0438\u0431\u043a\u0430!":"\u041d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(this.state.songs.length,"/").concat(this.state.count)),"error"===this.state.songs?r.a.createElement("div",null,r.a.createElement("img",{alt:"error",style:{display:"flex",marginLeft:"auto",marginRight:"auto",width:"80vw",height:"80vh",objectFit:"contain"},src:Y.Error})):this.state.songs?this.state.songs.map((function(e){return r.a.createElement(h.w,{className:"SongCell",key:e.id,before:r.a.createElement(h.c,{mode:"image",src:e.image}),description:e.artist,after:Math.floor(e.duration/60)+":"+"".concat(e.duration%60).padEnd(2,"0"),onClick:Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(1);case 1:case"end":return e.stop()}}),e)})))},e.title)})):null,this.state.snackbar))))}}]),a}(r.a.Component),U=a(151),J=a.n(U),Q=a(150),X=a.n(Q),Z=a(65),$=a.n(Z),ee=a(149),te=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={activePanel:"profile",vk_platform:"",files_count:r.a.createElement(h.y,{size:"small"}),files_size:r.a.createElement(h.y,{size:"small"}),subscriber:!1,notifications:!1,snackbar:null},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t,a,n,r,s,o,i,l=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.search){e.next=30;break}return t=window.location.search.match(/vk_platform=([a-z_]+)/),e.next=4,c.a.send("VKWebAppStorageGet",{keys:["notifications"]});case 4:return a=e.sent,["true","false"].includes(a.keys[0].value)||(a.keys[0].value="false"),this.setState({vk_platform:t[1].toString()}),n=(n=window.location.search.match(/vk_user_id=([1,2,3,4,5,6,7,8,9,0]+)/))[1].toString(),"https://converter.dan0102dan.ru/vk",r=new FormData,s="browser"!==this.state.vk_platform?window.location.search.slice(1):"null",r.append("sign",s),r.append("id",n),"cors",e.next=17,B.a.post("https://converter.dan0102dan.ru/vk",r,"cors").then(function(){var e=Object(x.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 17:if(o.data.sign){e.next=23;break}console.log(o.data),o.data.messages?this.setState({notifications:JSON.parse(a.keys[0].value)}):this.setState({notifications:o.data.messages}),this.setState({subscriber:o.data.subscriber}),e.next=25;break;case 23:return console.log(o.data.sign),e.abrupt("return");case 25:return e.next=27,c.a.send("VKWebAppStorageGet",{keys:["transfers","size"]}).catch((function(){return l.setState({files_count:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",files_size:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})}));case 27:i=e.sent;try{""===i.keys[0].value?this.setState({files_count:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}):isNaN(i.keys[0].value)||this.setState({files_count:i.keys[0].value})}catch(u){this.setState({files_size:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})}try{""===i.keys[1].value?this.setState({files_size:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"}):isNaN(i.keys[1].value)||this.setState({files_size:(Number(i.keys[1].value)/1e6).toFixed(3)+" \u041c\u0411"})}catch(p){this.setState({files_size:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})}case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openSuccess",value:function(){var e=this;this.setState({snackbar:r.a.createElement(h.x,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(h.c,{size:24,style:{backgroundColor:"var(--accent)"}},r.a.createElement(H.a,{fill:"#fff",width:14,height:14}))},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b!")})}},{key:"openError",value:function(){var e=this;this.setState({snackbar:r.a.createElement(h.x,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(h.c,{size:24,style:{backgroundImage:"linear-gradient(135deg, #fc7373, #cb5e5a)"}},r.a.createElement(G.a,{fill:"#fff",width:14,height:14}))},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b!")})}},{key:"openThanks",value:function(){var e=this;this.setState({snackbar:r.a.createElement(h.x,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(h.c,{size:24,style:{backgroundImage:"linear-gradient(135deg, #ffb73d, #ffa000)"}},r.a.createElement(X.a,{fill:"#fff",width:14,height:14}))},"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443!!")})}},{key:"render",value:function(){var e=this,t=!1;return r.a.createElement(h.s,{id:this.id,snackbar:this.state.snackbar},r.a.createElement(h.E,{activePanel:this.state.activePanel},r.a.createElement(h.s,{id:"profile"},r.a.createElement(O,null,"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement(h.m,null,r.a.createElement("img",{src:$.a,alt:"",style:{width:"100px",height:"100px",display:"block",marginLeft:"auto",marginRight:"auto",backgroundColor:"#202020",borderRadius:25}}),r.a.createElement(h.e,{level:"1",weight:"regular",style:{marginTop:7,marginBottom:16,textAlign:"center"}},"\u0412\u0435\u0440\u0441\u0438\u044f: ",ee.version)),r.a.createElement(h.m,{separator:"hide",header:r.a.createElement(h.n,null,"\u041f\u043b\u0435\u0439\u043b\u0438\u0441\u0442\u044b")},r.a.createElement(h.g,null,r.a.createElement(h.f,{size:"s"},r.a.createElement("div",{style:{width:144,height:144}})),r.a.createElement(h.f,{size:"s"},r.a.createElement("div",{style:{width:144,height:144}})),r.a.createElement(h.f,{size:"s"},r.a.createElement("div",{style:{width:144,height:144}})),r.a.createElement(h.f,{size:"s"},r.a.createElement("div",{style:{width:144,height:144}})))),r.a.createElement(h.m,null,r.a.createElement(h.h,{asideContent:r.a.createElement(h.z,{checked:!0===this.state.notifications,onChange:function(){var a=Object(x.a)(k.a.mark((function a(n){var r;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!0!==t){a.next=4;break}return a.abrupt("return");case 4:t=!0;case 5:if(!n.target.checked){a.next=23;break}return a.next=8,c.a.send("VKWebAppAllowMessagesFromGroup",{group_id:151064772}).catch((function(){e.openError(),e.setState({notifications:!1})}));case 8:if(!(null===(r=a.sent)||void 0===r?void 0:r.result)){a.next=16;break}return e.setState({notifications:!0}),e.openSuccess(),a.next=14,c.a.send("VKWebAppStorageSet",{key:"notifications",value:"true"});case 14:a.next=20;break;case 16:return e.openError(),e.setState({notifications:!1}),a.next=20,c.a.send("VKWebAppStorageSet",{key:"notifications",value:"false"});case 20:t=!1,a.next=28;break;case 23:return e.openError(),e.setState({notifications:!1}),t=!1,a.next=28,c.a.send("VKWebAppStorageSet",{key:"notifications",value:"false"});case 28:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()})},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e\u0442 \u0431\u043e\u0442\u0430")),r.a.createElement(h.m,null,r.a.createElement(h.h,{description:r.a.createElement("a",{style:{color:"#30ab65",textDecoration:"none"},rel:"noopener noreferrer",href:"https://vk.com/public151064772",target:"_blank"},"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0435\u0440"),indicator:this.state.subscriber?r.a.createElement(h.d,{mode:"secondary",disabled:!0},"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a"):r.a.createElement(h.d,{style:{cursor:"pointer"},onClick:Object(x.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.send("VKWebAppJoinGroup",{group_id:151064772});case 2:e.setState({subscriber:!0}),e.openThanks();case 4:case"end":return t.stop()}}),t)})))},"\u0412\u0441\u0442\u0443\u043f\u0438\u0442\u044c")},"\u0421\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e")),r.a.createElement(h.m,null,r.a.createElement(h.d,{style:{cursor:"pointer"},mode:"tertiary",size:"xl",before:r.a.createElement(J.a,null),onClick:function(){return c.a.send("VKWebAppShare",{link:"https://vk.com/app7647010"})}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c")),this.state.snackbar)))}}]),a}(r.a.Component),ae=(a(316),a(52)),ne=a.n(ae),re=a(152),se=a.n(re)()("https://music.dan0102dan.ru"),oe=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={activeStory:"home",popout:null,tabbar:!0,modal:null},n.onStoryChange=n.onStoryChange.bind(Object(p.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;c.a.subscribe((function(t){var a=t.detail,n=a.type;a.data;"VKWebAppViewHide"===n&&e.setState({popout:null})})),c.a.send("VKWebAppStorageGet",{keys:["greeting"]}).then((function(t){var a;console.log("haveshown",t),""===(null===t||void 0===t||null===(a=t.keys[0])||void 0===a?void 0:a.value)&&(e.setState({activeStory:"greeting",tabbar:null}),document.documentElement.style.setProperty("--padding","0"))})).catch((function(e){return console.log("e",e)}))}},{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story}),c.a.send("VKWebAppTapticSelectionChanged",{})}},{key:"render",value:function(){var e=this;return r.a.createElement(h.k,{activeStory:this.state.activeStory,tabbar:this.state.tabbar?r.a.createElement(h.A,null,r.a.createElement(h.B,{style:{cursor:"pointer"},onClick:this.onStoryChange,selected:"home"===this.state.activeStory,"data-story":"home",text:"home"===this.state.activeStory?"\u0413\u043b\u0430\u0432\u043d\u0430\u044f":null},"home"===this.state.activeStory?null:r.a.createElement(g.a,null)),r.a.createElement(h.B,{style:{cursor:"pointer"},onClick:this.onStoryChange,selected:"profile"===this.state.activeStory,"data-story":"profile",text:"profile"===this.state.activeStory?"\u0420\u0430\u0437\u043d\u043e\u0435":null},"profile"===this.state.activeStory?null:r.a.createElement(v.a,null))):null},r.a.createElement(h.E,{id:"home",activePanel:"home",popout:this.state.popout,modal:this.state.modal},r.a.createElement(L,{socket:se,setPopout:function(t){return e.setState({popout:t})},setTabbar:function(t){return e.setState({tabbar:t})},id:"home",setModal:function(t){return e.setState({modal:t})}})),r.a.createElement(h.E,{id:"profile",activePanel:"profile"},r.a.createElement(te,{id:"profile"})),r.a.createElement(h.E,{id:"greeting",activePanel:"greeting"},r.a.createElement(h.s,{id:"greeting",style:{position:"fixed"}},r.a.createElement(h.l,{slideWidth:"100%",align:"center",style:{height:"100vh"},slideIndex:this.state.slideIndex,onChange:function(t){return e.setState({slideIndex:t})},bullets:"light"},r.a.createElement("div",{style:{backgroundColor:"#520097",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("img",{className:"IntroImg",src:$.a,alt:"",style:{width:"300px",height:"300px",marginBottom:64}}),r.a.createElement(h.D,{level:"1",weight:"heavy",style:{color:"#fff",marginBottom:16,fontSize:"2.5em",textAlign:"center"}},"\u041f\u0435\u0440\u0435\u043d\u043e\u0441 \u043c\u0443\u0437\u044b\u043a\u0438"),r.a.createElement(h.D,{level:"3",weight:"semibold",style:{color:"#fff",marginBottom:4,textAlign:"center"}},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0441\u0435\u0440\u0432\u0438\u0441 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0430 \u043c\u0435\u0434\u0438\u0430\u0442\u0438\u043a\u0438 \u0432 VK!"),r.a.createElement(h.D,{level:"5",weight:"semibold",style:{color:"#fff",textAlign:"center",marginBottom:48,padding:"0 10px"}},"\u0421\u0432\u0430\u0439\u043f\u043d\u0438 \u0432\u043b\u0435\u0432\u043e, \u0447\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435."),r.a.createElement(h.j,null,r.a.createElement(h.d,{style:{cursor:"pointer"},size:"xl",mode:"commerce",onClick:function(){c.a.send("VKWebAppStorageSet",{key:"greeting",value:"true"}),e.setState({activeStory:"home",tabbar:!0}),document.documentElement.style.setProperty("--padding","calc(var(--safe-area-inset-bottom) + var(--tabbar_height))")}},"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c"))),r.a.createElement("div",{style:{backgroundColor:"#9b2952",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("img",{className:"IntroImg",src:ne.a,alt:"",style:{width:"300px",height:"300px",marginBottom:64}}),r.a.createElement(h.D,{level:"1",weight:"heavy",style:{color:"#fff",marginBottom:16,fontSize:"2.5em",textAlign:"center"}},"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c"),r.a.createElement(h.D,{level:"3",weight:"semibold",style:{color:"#fff",marginBottom:48,textAlign:"center",padding:"0 10px"}},"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0441\u0430\u043c\u044b\u0435 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a Apple Music, Spotify, \u042f\u043d\u0434\u0435\u043a\u0441 \u041c\u0443\u0437\u044b\u043a\u0430 \u0438 \u0442\u0430\u043a \u0434\u0430\u043b\u0435\u0435..."),r.a.createElement(h.j,null,r.a.createElement(h.d,{style:{cursor:"pointer"},size:"xl",mode:"commerce",onClick:function(){return e.setState({slideIndex:2})}},"\u0412\u0430\u0443"))),r.a.createElement("div",{style:{backgroundColor:"#29539B",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("img",{className:"IntroImg",src:ne.a,alt:"",style:{width:"300px",height:"300px",marginBottom:64}}),r.a.createElement(h.D,{level:"1",weight:"heavy",style:{color:"#fff",marginBottom:16,fontSize:"2.5em",textAlign:"center"}},"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c"),r.a.createElement(h.D,{level:"3",weight:"semibold",style:{color:"#fff",marginBottom:48,textAlign:"center",padding:"0 10px"}},"\u0412\u0441\u0451 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u043c \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0431\u0435\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u043d\u0430 \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b."),r.a.createElement(h.j,null,r.a.createElement(h.d,{style:{cursor:"pointer"},size:"xl",mode:"commerce",onClick:function(){c.a.send("VKWebAppStorageSet",{key:"greeting",value:"true"}),e.setState({activeStory:"home",tabbar:!0}),document.documentElement.style.setProperty("--padding","calc(var(--safe-area-inset-bottom) + var(--tabbar_height))")}},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0441\u0435\u0440\u0432\u0438\u0441!")))))))}}]),a}(r.a.Component);o.a.render(r.a.createElement(oe,null),document.getElementById("root")),c.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"bright_light",document.body.attributes.setNamedItem(r)}})),c.a.send("VKWebAppInit")},52:function(e,t,a){e.exports=a.p+"static/media/AppleMusic.cd5eac42.svg"},65:function(e,t,a){e.exports=a.p+"static/media/ava.d549df08.png"}},[[203,1,2]]]);